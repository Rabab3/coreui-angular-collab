<div class="users-wrapper">
  <h2>ğŸ‘¥ GÃ©rer les utilisateurs</h2>

  <div class="filters">
    <input
      type="text"
      [(ngModel)]="recherche"
      placeholder="ğŸ” Rechercher par nom ou prÃ©nom"
      (input)="actualiserListe()"
    />
    <select [(ngModel)]="filtreRole" (change)="actualiserListe()">
      <option value="">Tous les rÃ´les</option>
      <option value="admin">Admin</option>
      <option value="moderateur">ModÃ©rateur</option>
      <option value="contributeur">Contributeur</option>
      <option value="lecteur">Lecteur</option>
    </select>
  </div>

  <table>
    <thead>
      <tr>
        <th>Nom</th>
        <th>PrÃ©nom</th>
        <th>Email</th>
        <th>TÃ©lÃ©phone</th>
        <th>Date naissance</th>
        <th>CIN</th>
        <th>Statut</th>
        <th>RÃ´le</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let user of utilisateursFiltres">
        <td>{{ user.nom }}</td>
        <td>{{ user.prenom }}</td>
        <td>{{ user.email }}</td>
        <td>{{ user.telephone }}</td>
        <td>{{ user.dateNaissance }}</td>
        <td>{{ user.cin }}</td>
        <td>{{ user.statutMarital }}</td>
        <td>{{ user.role }}</td>
        <td>
          <button class="edit" (click)="ouvrirModal(user)">âœï¸</button>
          <button class="delete" (click)="supprimerUtilisateur(user.id)">ğŸ—‘ï¸</button>
        </td>
      </tr>
    </tbody>
  </table>

  <!-- MODALE -->
  <div class="modal" *ngIf="showModal">
    <div class="modal-content">
      <h3>âœï¸ Modifier l'utilisateur</h3>

      <form (ngSubmit)="enregistrerModifications()">
        <label>Nom :</label>
        <input [(ngModel)]="utilisateurActuel.nom" name="nom" required />

        <label>PrÃ©nom :</label>
        <input [(ngModel)]="utilisateurActuel.prenom" name="prenom" required />

        <label>Email :</label>
        <input [(ngModel)]="utilisateurActuel.email" name="email" type="email" required />

        <label>TÃ©lÃ©phone :</label>
        <input [(ngModel)]="utilisateurActuel.telephone" name="telephone" />

        <label>Date de naissance :</label>
        <input [(ngModel)]="utilisateurActuel.dateNaissance" name="dateNaissance" type="date" />

        <label>CIN :</label>
        <input [(ngModel)]="utilisateurActuel.cin" name="cin" />

        <label>Statut marital :</label>
        <select [(ngModel)]="utilisateurActuel.statutMarital" name="statutMarital">
          <option value="CÃ©libataire">CÃ©libataire</option>
          <option value="MariÃ©">MariÃ©</option>
          <option value="DivorcÃ©">DivorcÃ©</option>
        </select>

        <div class="modal-actions">
          <button type="submit" class="save">ğŸ’¾ Enregistrer</button>
          <button type="button" (click)="fermerModal()">âŒ Annuler</button>
        </div>
      </form>
    </div>
  </div>
</div>
