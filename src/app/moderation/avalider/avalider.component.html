<div class="container">
  <h2> Articles Ã  valider</h2>

  <input
    type="text"
    [(ngModel)]="searchTerm"
    placeholder="Rechercher un article..."
    class="search-bar"
  />

  <div class="article-list">
    <div class="article-card" *ngFor="let article of articlesFiltres">
      <h3>{{ article.titre }}</h3>
      <p><strong>ğŸ•’ Date :</strong> {{ article.date | date:'yyyy-MM-dd' }}</p>
      <p>{{ article.contenu }}</p>

      <div class="actions">
        <button (click)="valider(article)">âœ”ï¸ Valider</button>
        <button (click)="openRetourModal(article)">ğŸ” Retourner</button>
        <button (click)="voir(article)">ğŸ‘ï¸ Voir</button>
      </div>
    </div>
  </div>
</div>

<!-- Modale Retour -->
<div class="modal-backdrop" *ngIf="showModal">
  <div class="modal-content">
    <h3>ğŸ’¬ Commentaire de retour</h3>
    <textarea [(ngModel)]="commentaireRetour" placeholder="Pourquoi retourner cet article ?"></textarea>
    <div class="modal-actions">
      <button (click)="closeModal()">Annuler</button>
      <button (click)="retourner()">Envoyer</button>
    </div>
  </div>
</div>

<!-- Modale AperÃ§u -->
<div class="modal-backdrop" *ngIf="showApercu">
  <div class="modal-content apercu-modal">
    <h3 class="apercu-title">ğŸ” {{ selectedArticle?.titre || 'Article' }}</h3>

<div class="meta">
  <p>ğŸ•’ {{ selectedArticle?.date | date: 'yyyy-MM-dd' }}</p>
  <p>âœï¸ <strong>Mode de saisie :</strong> {{ selectedArticle?.mode || 'Ã‰diteur' }}</p>
  <p>ğŸ“‚ <strong>CatÃ©gorie :</strong> {{ selectedArticle?.categorie || 'Non spÃ©cifiÃ©e' }}</p>

  <ng-container *ngIf="hasTags()">

    <p>ğŸ·ï¸ <strong>Tags :</strong></p>
    <div class="tags">
     <span *ngFor="let tag of selectedArticle?.tags">{{ tag }}</span>

    </div>
  </ng-container>

  <ng-container *ngIf="selectedArticle?.source">
    <p>ğŸŒ <strong>Source :</strong></p>
    <a [href]="selectedArticle?.source" target="_blank">{{ selectedArticle?.source }}</a>
  </ng-container>
</div>


    <hr />

<div class="apercu-content" [innerHTML]="formatContenu(selectedArticle?.contenu || '')"></div>



    <div class="modal-actions">
      <button (click)="fermerApercu()">Fermer</button>
    </div>
  </div>
</div>


